<ng-include src="'partials/Header.html'" ng-controller="headerCtrl"></ng-include>
<ng-include src="'partials/Sidebar.html'" ng-controller="sidebarCtrl"></ng-include>

<div class="events-list col-xs-9">
	<div class="col-xs-12 event-filter">
		<form id="searchValues">
	        <div id="dateDiv" class="col-md-3">
	        	<label for="dateSelection">Date:</label>
	            <input
	            	ng-model="dateSelection"
	            	ng-change="getEvents()"
	            	id="dateSelection"
	            	placeholder="Select a date"
	            	type="date"
	            	class="form-control"/>
	        </div>
	        <div class="col-md-3">
	        	<label for="sort">Sort by:</label>
	        	<select
	        		ng-model="sort"
					ng-change="getEvents()"
	        		name="sort"
	        		id="sort"
	        		class="form-control">
	        		<option value="time" selected>Time</option>
	        		<option value="distance">Distance</option>
	        		<option value="venue">Venue</option>
	        		<option value="popularity">Popularity</option>
	        	</select>
	        </div>
	        <div class="col-md-3" >
	        	<label for="distance">Distance:</label>
	        	<output for="distance" id="distanceOutput">5 km</output>
				<input 
					ng-model="distance"
					ng-change="getEvents()"
					oninput="document.getElementById('distanceOutput').value = this.value + ' km'"
					type="range"
					id="distance"
					min="1"
					max="50">
	        </div>
	    
        </form>  
	</div>
	<div class="col-xs-12 event-item" ng-repeat="event in events.events">
		<div class="col-xs-2 event-picture">
			<img ng-src="{{event.profilePicture}}" alt="{{event.name}}">
		</div>
		<div class="col-xs-10">
			<div class="col-xs-12">
				<h4>
					<a ng-href="#!/ShowEvent/{{event.id}}">{{event.name}}</a>
				</h4>
				<div class="event-description">
					{{event.description | limitTo:320 }} ...
				</div>
				<div class="event-item-info">
					<i class="fa fa-location-arrow"></i>
					{{event.distance}}m
				</div> 
				<div class="event-item-info">
					<i class="fa fa-clock-o"></i>
					{{event.startTime | date:'dd/MM/yyyy - HH:mm':"+0200" }} -{{event.endTime | date:'HH:mm':"+0200"}}
				</div> 
				<div class="event-item-info">
					<i class="fa fa-check"></i>
					{{event.stats.attending}}
				</div> 
				<div class="event-item-info">
					<i class="fa fa-map-pin"></i>
					{{event.venue.name}}
				</div>
				<button 
					type="button"
					ng-click="addEvent(event.id,event.name,event.startTime,event.profilePicture)"
					class="add-event">
					Add to my events
				</button>
			</div>
		</div>
	</div>
</div>